<article class="m-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Edit Book</h2>
      <a [routerLink]="['/books']" class="btn btn-secondary">Back to List</a>
    </div>
    
    <form [formGroup]="bookForm" (ngSubmit)="onSave()" class="card">
      <div class="card-body">
        <div class="mb-3">
          <label for="title" class="form-label">Title</label>
          <input 
            type="text" 
            class="form-control" 
            id="title" 
            formControlName="title"
            [ngClass]="{'is-invalid': bookForm.get('title')?.invalid && (bookForm.get('title')?.dirty || bookForm.get('title')?.touched)}"
          >
          <div *ngIf="bookForm.get('title')?.errors?.['required'] && (bookForm.get('title')?.dirty || bookForm.get('title')?.touched)" class="invalid-feedback">
            Title is required.
          </div>
          <div *ngIf="bookForm.get('title')?.errors?.['maxlength'] && (bookForm.get('title')?.dirty || bookForm.get('title')?.touched)" class="invalid-feedback">
            Title cannot be longer than 50 characters.
          </div>
        </div>
        
        <div class="mb-3">
          <label for="author" class="form-label">Author</label>
          <input 
            type="text" 
            class="form-control" 
            id="author" 
            formControlName="author"
            [ngClass]="{'is-invalid': bookForm.get('author')?.invalid && (bookForm.get('author')?.dirty || bookForm.get('author')?.touched)}"
          >
          <div *ngIf="bookForm.get('author')?.errors?.['required'] && (bookForm.get('author')?.dirty || bookForm.get('author')?.touched)" class="invalid-feedback">
            Author is required.
          </div>
          <div *ngIf="bookForm.get('author')?.errors?.['maxlength'] && (bookForm.get('author')?.dirty || bookForm.get('author')?.touched)" class="invalid-feedback">
            Author cannot be longer than 50 characters.
          </div>
        </div>
        
        <div class="mb-3">
          <label for="year" class="form-label">Year</label>
          <input 
            type="number" 
            class="form-control" 
            id="year" 
            formControlName="year"
            [ngClass]="{'is-invalid': bookForm.get('year')?.invalid && (bookForm.get('year')?.dirty || bookForm.get('year')?.touched)}"
          >
          <div *ngIf="bookForm.get('year')?.errors?.['required'] && (bookForm.get('year')?.dirty || bookForm.get('year')?.touched)" class="invalid-feedback">
            Year is required.
          </div>
          <div *ngIf="bookForm.get('year')?.errors?.['min'] && (bookForm.get('year')?.dirty || bookForm.get('year')?.touched)" class="invalid-feedback">
            Year must be at least 1000.
          </div>
          <div *ngIf="bookForm.get('year')?.errors?.['max'] && (bookForm.get('year')?.dirty || bookForm.get('year')?.touched)" class="invalid-feedback">
            Year cannot be greater than 2023.
          </div>
        </div>
        
        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea 
            class="form-control" 
            id="description" 
            rows="5" 
            formControlName="description"
            [ngClass]="{'is-invalid': bookForm.get('description')?.invalid && (bookForm.get('description')?.dirty || bookForm.get('description')?.touched)}"
          ></textarea>
          <div *ngIf="bookForm.get('description')?.errors?.['maxlength'] && (bookForm.get('description')?.dirty || bookForm.get('description')?.touched)" class="invalid-feedback">
            Description cannot be longer than 1000 characters.
          </div>
        </div>
        
        <div class="d-flex gap-2">
          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="!isSaveButtonEnabled"
          >
            Save
          </button>
          <button 
            type="button" 
            class="btn btn-secondary" 
            (click)="onCancel()"
          >
            Cancel
          </button>
        </div>
      </div>
    </form>
  </article>